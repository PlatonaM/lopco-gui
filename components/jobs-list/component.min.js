
export{Active,History}
class JobsList{constructor(ctr){this.container=ctr;this.color_map={pending:"#8A2BE2",running:"#1E90FF",finished:"#228B22",failed:"#DC143C",aborted:"#FF7F50"}}
draw(endpoint,st_sort=false){fetch('http://localhost:8000/job-manager/'+endpoint).then((response)=>response.json()).then((data)=>{fetch('components/jobs-list/template.html').then((response)=>response.text()).then((template)=>{let items=[];for(const[key,value]of Object.entries(data)){items.push({id:key,ds_id:value['machine_id'],status:value['status'],pipeline_id:value['pipeline_id'],created:value['created'],st_color:this.color_map[value['status']]})}
this.container.innerHTML=Mustache.render(template,{jobs:items,st_sort:st_sort});});}).catch((err)=>{this.container.innerHTML=err});}}
class Active extends JobsList{constructor(ctr){super(ctr);}
draw(){super.draw('jobs');}}
class History extends JobsList{constructor(ctr){super(ctr);}
draw(){super.draw('history',true);}}