
export{Active,History}
class JobsList{constructor(ctr){this.loadStyle();this.container=ctr;this.api='/api/job-manager/'}
loadStyle(){let element=document.createElement("link");element.href="/components/jobs-list/style.css";element.rel="stylesheet";document.getElementsByTagName("head")[0].appendChild(element);}
draw(endpoint,path){fetch(this.api+endpoint).then((response)=>response.json()).then((data)=>{fetch('/components/jobs-list/template.html').then((response)=>response.text()).then((template)=>{let items=[];for(const[key,value]of Object.entries(data)){items.push({id:key,ds_id:value['machine_id'],status:value['status'],pipeline_id:value['pipeline_id'],created:value['created']})}
this.container.innerHTML=Mustache.render(template,{jobs:items,path:path});});}).catch((err)=>{this.container.innerHTML=err});}}
class Active extends JobsList{constructor(ctr){super(ctr);}
draw(){super.draw('jobs','active');}}
class History extends JobsList{constructor(ctr){super(ctr);}
draw(){super.draw('history','history');}}