
export{Details}
class Details{constructor(ctr){this.container=ctr;}
genFields(items){let fields=[];let null_fields=[];let x;for(x=0;x<items.length;x++){try{for(const[key,value]of Object.entries(items[x])){fields.push({field:key,f_value:value});}}catch(err){null_fields.push({field:'null'});}}
return[fields,null_fields];}
genConfigs(items){let configs=[];if(items){for(const[key,value]of Object.entries(items)){configs.push({conf_key:key,conf_value:(value)?value:'null'})}}
return configs;}
draw(w_id){fetch(active_cmp.constructor.api+'/'+w_id).then((response)=>{if(response.ok){return response.json()}
throw'Error retrieving worker - '+response.status;}).then((data)=>{fetch('/components/workers/details/template.html').then((response)=>response.text()).then((template)=>{this.container.innerHTML=Mustache.render(template,{id:w_id,name:data['name'],image:data['image'],description:data['description'],data_cache_path:data['data_cache_path'],conf_section:(data['configs']),configs:this.genConfigs(data['configs']),i_type:(data['input'])?data['input']['type']:null,o_type:(data['output'])?data['output']['type']:null,i_fields:(data['input'])?data['input']['fields']:null,o_fields:(data['output'])?data['output']['fields']:null});});}).catch((err)=>{this.container.innerHTML=err});}}