
export{List}
class List{constructor(ctr){this.container=ctr;}
draw(){fetch(active_cmp.constructor.api).then((response)=>response.json()).then((data)=>{fetch('/components/workers/list/template.html').then((response)=>response.text()).then((template)=>{let items=[];for(let[key,value]of Object.entries(data)){value=JSON.parse(value);items.push({id:key,name:value['name'],image:value['image'],description:value['description']})}
this.container.innerHTML=Mustache.render(template,{ds_items:items});});}).catch((err)=>{this.container.innerHTML=err});}
delete(id){if(confirm('Delete '+id+'?')){fetch(active_cmp.constructor.api+'/'+id,{method:'DELETE'}).then((response)=>{if(response.ok){window.open('/workers','_self');}else{throw response.status;}}).catch((err)=>{alert('Error deleting '+id+' - '+err);})}}}